{% ckan_extends %}
{% block resource_item_title %}
    {# Modification start; section added; Maps the symbol for markdown files to the one for text #}
    {% if res.format == "text/markdown" %}
        {% set format = "txt" %}
    {% else %}
        {% set format = res.format %}
    {% endif %}
    {# Modification end #}
    <a class="heading"
       href="{{ url }}"
       title="{{ res.name or res.description }}">
        {{ h.resource_display_name(res) | truncate(50) }}<span class="format-label"
      property="dc:format"
      data-format="{{ format.lower() or 'data' }}">{{ h.get_translated(res, 'format') }}</span>
        {{ h.popular('views', res.tracking_summary.total, min=10) if res.tracking_summary }}
    </a>
{% endblock %}
